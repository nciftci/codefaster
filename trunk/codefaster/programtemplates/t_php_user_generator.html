<?php
/*
 CODE GENERATED BY: GRAFXSOFTWARE CODE GENERATOR
 http://www.grafxsoftware.com
====================================== 
 PHPFILE MADE BY: {AUTHOR}
 DATE: {DATE}
 PROJECT: {PROJECT_NAME}
======================================
*/

// open a session
session_start();

include_once("./config.inc.php");

if (!isset($_SESSION['session_lang'])) {
    $session_lang = $LANG;
    $_SESSION['session_lang'] = $session_lang;
} else {
    $session_lang=$_SESSION['session_lang'];
}
include_once(INCLUDE_PATH . "connection.php");
include_once(INDEX_PATH . "cls_fast_template.php");
$NEWLANG = $session_lang;
include_once(INCLUDE_LANGUAGE_PATH . $NEWLANG . ".inc.php");

$stringutil = new String();
$all_url_vars = $stringutil->parse_all();
{OTHER_INCLUDE_MODULES}

// We explode here the link for SEO or NONSEO
// testproduct.php?id=1 or testproduct.php/Somethinghere/1/
// id is the first element, the primary key.
// in all places {FUNC_NAME1ELEMENT} = primary key fiels (usually the first field from table)
             
if(empty($all_url_vars['{FUNC_NAME1ELEMENT}'])) {
    $expl = explode("/",$_SERVER["REQUEST_URI"]);
    $expl = array_reverse ($expl);
    $all_url_vars['{FUNC_NAME1ELEMENT}'] = $expl[1];
}

// sanitize it.
$all_url_vars['{FUNC_NAME1ELEMENT}'] = (int) ($all_url_vars['{FUNC_NAME1ELEMENT}']);	
// END explode and sanitize.	 

// if the ID cannot be parsed, then redirect to error.php.   
if ( empty($all_url_vars['{FUNC_NAME1ELEMENT}']) ) header("Location: ".CONF_INDEX_URL."error.php");
               
$ft = new FastTemplate(TEMPLATE_PATH);
$ft -> define(array("main" => "template_index.html", "content" => "{VARR}.html"));

//$stringutil->cleanDescription2(...) We need to see how to Clean the text ... this function do it
//but dunno if is OK to call also on INT, so we need to detect which is INT and which is text.
//also we get out all, but primary key is missed cause we call from URL.
//$ft -> assign("ID", $all_url_vars["{FUNC_NAME1ELEMENT}"]);
//stripslashes($stringutil->cleanDescription2());

{VARR} = new {CLS}($all_url_vars["{FUNC_NAME1ELEMENT}"]);
<!-- BEGIN DYNAMIC BLOCK: formelements -->
	$ft->assign("{FORM_ELEMSUPPER}",{VARR}->get{FORM_ELEMS}());
<!-- END DYNAMIC BLOCK: formelements -->
// static part
$ft->assign("TITLE_TAG","");
$ft->multiple_assign_define("LANG_");
$ft->multiple_assign_define("CONF_");
$ft->parse("BODY", array("content","main"));
$ft->showDebugInfo(ERROR_DEBUG);
$ft->FastPrint();	

?>